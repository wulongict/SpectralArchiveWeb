<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <style>
    #networksvg {
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .links line {
      /*stroke: #999;*/
      /*stroke-opacity: 0.6;*/
    }

    .nodes circle {
      stroke: #fff;
      cursor: pointer;
      /*stroke-width: 1.5px;*/
    }

    .contextmenu {
      position: absolute;
      padding: 0px;
      background: #fff;
      color: #555;
      border: 1px solid #C6C6C6;
    }

    .contextmenu a {
      display: block;
      color: #555;
      padding: 2px;
      cursor: default;
    }

    .contextmenu a:hover {
      color: #fff;
      background: #3879D9;
    }

    .tooltip-inner {
      max-width: 100% !important;
      /* text-align: left !important; */
    }

    #denovoplot {
      width: 100%;
      overflow: auto;
      border: 1px solid lightgrey;
    }

    #nodestable tbody tr td:first-child {
      cursor: pointer;
    }
    p {
      font-size: 18px;
    }

    /* figcaption {
      color:blue;
      font-size: 16px;
    } */

    /* figure {
  border: 1px #cccccc solid;
  padding: 4px;
  margin: auto;
} */

figcaption {
  background-color: white;
  color: green;
  font-size: 20px;
  /* font-style: italic; */
  padding: 2px;
  /* text-align: center; */
}

    /* h1 {color:red;}
    p {color:blue;} */

  </style>
  <!-- Required meta tags -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css"
    integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous" />
  <link href="/lorikeet/css/my.css" rel="stylesheet" type="text/css">
  <!-- <script src="https://cdn.bootcss.com/jquery/2.1.1/jquery.min.js"></script> -->
  <!-- <script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script> -->
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <script data-require="snap.svg@*" data-semver="0.3.0" src="//cdn.jsdelivr.net/snap.svg/0.3.0/snap.svg-min.js">
  </script>
  <!-- add our script for bootstrap -->
  <!-- We are happy now -->
  <!-- <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script> -->
  <!-- <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script> -->
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
    integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
    integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous">
    </script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"
    integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous">
    </script>
  <!-- this is the code for Data Table, responsive: -->
  <script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap4.min.js"></script>

  <script src="../shared_functions.js"></script>
  <script src="../run.js"></script>
  <script src="../chromatogram.js"></script>
  <!-- those are for lorikeet -->
  <!-- <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script> -->
  <!-- <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.4/jquery-ui.min.js" ></script> -->
  <script type="text/javascript" src="/lorikeet/js/jquery.flot.js"></script>
  <script type="text/javascript" src="/lorikeet/js/jquery.flot.selection.js"></script>
  <script type="text/javascript" src="/lorikeet/js/specview.js"></script>
  <script type="text/javascript" src="/lorikeet/js/peptide.js"></script>
  <script type="text/javascript" src="/lorikeet/js/aminoacid.js"></script>
  <script type="text/javascript" src="/lorikeet/js/ion.js"></script>
  <script type="text/javascript" src="/lorikeet/js/internal.js"></script>
  <link rel="stylesheet" type="text/css" href="/lorikeet/css/lorikeet.css" />
  <title>Spectroscape Documentation</title>

</head>

<body>


  <div class="container-fluid" id="archive_navigation_bar"></div>

<div class="container-fluid col-11  " class="mx-auto">
    <article>
        <h1>Spectroscape User Manual with GIFs</h1>
        <!-- <section>
          <h3>Introduction</h3>
           <p class="text-justify">Traditional search uses user defined parameters, such as precursor/fragment mass tolerance window, sequence/spectral database, user-specified post-translational modifications (PTMs), to specify searching space. This results in inferior peptide spectrum matches (PSMs) when the correct peptide candiates is out of the search space. Here, we present spectral archive search as an alternative to make it possible for searching against the most complete spectral space. Using advanced indxing techniques and efficient data compressing step, we can build a real-time spectral archive tool without any parameters. The idea behind this archive search tool is simple: for each spectral, if it is reproducible, it must have a close spectral neighbor, given that we have collect a large number of spectra (annotated by others).  </p>
          <p class="text-justify">This new apporach enables one to detect recurring analytes, with the potential to detect PTMs based on the mass difference of the matched spectral pairs. It can also shed light to the so called "dark matter" as more and more data added to the spectral archive. The spectral archive approach can be built and updated incrementally in linear time. It provides an easy way for introspection on previously released data sets and correct the historical errors. It is a powerful tool to mining into historical data to support new hypothesis. After converted into our .mz format, the local mass spectral file can be searched directly against the spectral archive. </p>

        </section> -->


        <section>
           <!-- <h2>Dive into the spectral space</h2>
          <p class="text-justify"> For searching a given MS2 spectra with id 16189, just go to the Spectral Search tab, and type the query id into the input box as follows. (Figure 1) </p>

          <figure class="figure">
            <img src="/images/fig1.png" class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure.">
            <figcaption class="figure-caption">Searching against spectral archive with query spectrum of id 16189 inside the spectral archive.</figcaption>
          </figure> -->


          <!-- <p>Paragraph</p>
          <p>Paragraph</p> -->
          <h2>Search query</h2>
          <p>Each MS2 spectrum in the archive is designated with an identifier (id). The identifier ranges from 0 to size of the archive (exclusive). The following example shows how to search an query spectra from NIST library. The query id is <a href="http://omics.ust.hk:8709/id/25757878">25757878</a>. </p>
          <figure class="figure">
            <img src="/images/library-bridge.gif" class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure.">
            <figcaption >Fig.1 - library entry as a bridge of two clusters.</figcaption>
          </figure>

          <h2>Tooltip on node and edges, PSM visualization and search new query</h2>
          <p>over any node or edge to show the tooltip information. Single click on any node to show the PSM on the right side using Lorikeet. Double click on any node to start a new search using that node as query spectrum.</p> 
          
          <figure class="figure">
            <img src="/images/tooltip-node-edge-click.gif" class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure.">
            <figcaption>Fig.2 - Tooltip on node and edges. Single click to show the PSM. Double click to start a new search.</figcaption>
          </figure>

          <h2>Tuning parameters of graph</h2>
          <p>Change the strength of repulsive force between nodes and the attractive force (gravity) to the center. Also adapt the width of edges. </p>

          <figure class="figure">
            <img src="/images/tuning-parameters-of-graph.gif" class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure.">
            <figcaption >Fig.3 - Tuning the parameters of the graph, repusive and attractive force, and edge width.</figcaption>
          </figure>

          <h2>Investigate unidentified PSM corresponding to semitryptic peptide</h2>
          <p> The following examples shows how to find the correct solution of an unidentified peptide. The query id is <a href="http://omics.ust.hk:8709/id/18497303">18497303 </a>. In this case, the query node is in black color which means it is not identified. However, there are many neighbors in red are identified as DDPLTNLNTAFDVAEK, and the highlighted edge suggests that the delta mass is 230Da, which equals to mass of "DD". So we can guess if we remove the DD from "DDPLTNLNTAFDVAEK", the remaining part "PLTNLNTAFDVAEK" will match to the query node. In the PSM viewer, we edit the peptide and click update button, and see it is a very good PSM. The user can send a message to the server to report this error. </p>
          <figure class="figure">
            <img src="/images/semi-tryptic-case-study.gif" class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure.">
            <figcaption >Fig.4 - Investigate into the unidentified PSM using the information of its neighbors. The highlighted edges shows the mass difference of 230 Da equals to the mass of "DD". And we find the red nodes are all matched with a peptide that starts with "DD". What if we remove the DD and use the remaining part to match with the query spectrum? Yes, it turns out that the correct anwser is "PLTNLNTAFDVAEK".</figcaption>
          </figure>

          <h2>Investigate into mixture spectra of two similar peptides</h2>
          <p> The following example shows two similar peptides co-fragmented into one MS2 spectrum.  The query id is <a href="http://omics.ust.hk:8709/id/18793053">18793053 </a>. In this case, the neighbors of the query node form one tightly connected cluster. All of them are identified, but as two different peptides, ADIDVSGPK and ADVDISGPK. Thse two peptides share many fragment ions. From the back-to-back PSM plot implemented in Spectroscape interface, one can clearly see the query spectra contains peaks of both peptides.  </p>
            
            <p>There are four different mode when it comes to the back-to-back plot: query, neighbor, separate and mixture. In the first three mode, the back-to-back plot shows two spectra, the top spectrum is the one user selected by single clicking on the neighbouring node, and the bottom one is the query spectrum. The query method will annotate the two spectrum with the peptide of query node. The neighbor method will annotate the two spectrum with the peptide of the user selected spectra. The separate method will annotate the two spectra with their own peptide. The last method, the mixture annotation will show top and bottom with the same query spectrum, but annotated with query peptide (bottom) and peptide of user selected node (top).  </p>
          <figure class="figure">
            <img src="/images/mixture-spectra-case-study.gif" class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure.">
            <figcaption >Fig.5 - Investigate into a mixture spectra. The cluster returned by Spectroscape contains two different peptides. According to the analysis with back-to-back PSM plot, we can tell the query node is a mixture of peptide ADIDVSGPK and ADVDISGPK . </figcaption>
          </figure>

        </section>
      </article>

</div>
<div class="container-fluid" style="visibility: hidden">
    <div class="page-header" color="blue">
      <h1>Spectral Cluster Viewer</h1>
      <p>
        This is a spectral archive built from 7,849,350 MS2 spectra (updated
        on August 14, 2018). No spectra is filtered out from this process.
      </p>
    </div>
  </div>

<script>
    $(document).ready(add_navigation_bar_doc_page);
</script>

</body>

</html>